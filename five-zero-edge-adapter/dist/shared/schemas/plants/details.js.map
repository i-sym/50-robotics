{"version":3,"file":"details.js","sourceRoot":"/","sources":["shared/schemas/plants/details.ts"],"names":[],"mappings":";;;AAAA,6BAAuB;AAGV,QAAA,qBAAqB,GAAG,OAAC,CAAC,MAAM,CAAC;IAC1C,EAAE,EAAE,OAAC,CAAC,MAAM,EAAE;IACd,IAAI,EAAE,OAAC,CAAC,MAAM,EAAE;IAChB,OAAO,EAAE,OAAC,CAAC,MAAM,EAAE;IACnB,MAAM,EAAE,OAAC,CAAC,MAAM,EAAE;IAClB,IAAI,EAAE,OAAC,CAAC,IAAI,CAAC,CAAC,QAAQ,EAAE,QAAQ,EAAE,MAAM,CAAC,CAAC;IAC1C,IAAI,EAAE,OAAC,CAAC,MAAM,EAAE,CAAC,QAAQ,EAAE;IAC3B,UAAU,EAAE,OAAC,CAAC,MAAM,EAAE,CAAC,QAAQ,EAAE;IACjC,UAAU,EAAE,OAAC,CAAC,KAAK,CAAC,OAAC,CAAC,MAAM,EAAE,CAAC,CAAC,QAAQ,EAAE;CAC7C,CAAC,CAAA;AAEW,QAAA,kBAAkB,GAAG,OAAC,CAAC,MAAM,CAAC;IACvC,IAAI,EAAE,OAAC,CAAC,MAAM,EAAE;IAChB,IAAI,EAAE,OAAC,CAAC,KAAK,CAAC,OAAC,CAAC,MAAM,CAAC;QACnB,IAAI,EAAE,OAAC,CAAC,MAAM,EAAE;QAChB,IAAI,EAAE,OAAC,CAAC,IAAI,CAAC,CAAC,QAAQ,EAAE,QAAQ,EAAE,MAAM,CAAC,CAAC;QAC1C,UAAU,EAAE,OAAC,CAAC,KAAK,CAAC,OAAC,CAAC,MAAM,EAAE,CAAC,CAAC,QAAQ,EAAE;KAC7C,CAAC,CAAC;CACN,CAAC,CAAA;AAEW,QAAA,2BAA2B,GAAG,OAAC,CAAC,kBAAkB,CAAC,MAAM,EAAE;IACpE,OAAC,CAAC,MAAM,CAAC;QACL,IAAI,EAAE,OAAC,CAAC,OAAO,CAAC,QAAQ,CAAC;QACzB,MAAM,EAAE,OAAC,CAAC,IAAI,CAAC,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;KAChC,CAAC;IACF,OAAC,CAAC,MAAM,CAAC;QACL,IAAI,EAAE,OAAC,CAAC,OAAO,CAAC,MAAM,CAAC;QACvB,cAAc,EAAE,OAAC,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC;KAC/C,CAAC;CACL,CAAC,CAAA;AAIW,QAAA,YAAY,GAAG,OAAC,CAAC,MAAM,CAAC;IACjC,EAAE,EAAE,OAAC,CAAC,MAAM,EAAE;IACd,IAAI,EAAE,OAAC,CAAC,MAAM,EAAE;IAChB,eAAe,EAAE,mCAA2B;IAC5C,YAAY,EAAE,OAAC,CAAC,MAAM,CAAC;QACnB,EAAE,EAAE,OAAC,CAAC,MAAM,EAAE;QACd,IAAI,EAAE,OAAC,CAAC,MAAM,EAAE;QAChB,QAAQ,EAAE,OAAC,CAAC,MAAM,EAAE;KACvB,CAAC;IAEF,UAAU,EAAE,OAAC,CAAC,MAAM,CAAC;QACjB,KAAK,EAAE,6BAAqB;QAC5B,MAAM,EAAE,6BAAqB;QAC7B,MAAM,EAAE,OAAC,CAAC,KAAK,CAAC,6BAAqB,CAAC;KACzC,CAAC;IAEF,OAAO,EAAE,OAAC,CAAC,MAAM,CAAC;QACd,QAAQ,EAAE,0BAAkB;QAC5B,SAAS,EAAE,0BAAkB;KAChC,CAAC;CAEL,CAAC,CAAA;AAEW,QAAA,WAAW,GAAG,OAAC,CAAC,MAAM,CAAC;IAChC,EAAE,EAAE,OAAC,CAAC,MAAM,EAAE;IACd,IAAI,EAAE,OAAC,CAAC,MAAM,EAAE;IAChB,QAAQ,EAAE,OAAC,CAAC,MAAM,EAAE;IACpB,WAAW,EAAE,OAAC,CAAC,KAAK,CAAC,OAAC,CAAC,MAAM,EAAE,CAAC;CACnC,CAAC,CAAA","sourcesContent":["import { z } from 'zod'\n\n\nexport const datapointConfigSchema = z.object({\n    id: z.number(),\n    name: z.string(),\n    address: z.number(),\n    length: z.number(),\n    type: z.enum(['number', 'string', 'enum']),\n    unit: z.string().optional(),\n    multiplier: z.number().optional(),\n    enumValues: z.array(z.string()).optional()\n})\n\nexport const methodConfigSchema = z.object({\n    name: z.string(),\n    args: z.array(z.object({\n        name: z.string(),\n        type: z.enum(['number', 'string', 'enum']),\n        enumValues: z.array(z.string()).optional()\n    }))\n})\n\nexport const deviceSwitchingConfigSchema = z.discriminatedUnion('mode', [\n    z.object({\n        mode: z.literal('manual'),\n        target: z.enum(['on', 'off']),\n    }),\n    z.object({\n        mode: z.literal('auto'),\n        priceThreshold: z.coerce.number().step(0.01),\n    })\n])\n\nexport type DeviceSwitchingConfigData = z.infer<typeof deviceSwitchingConfigSchema>\n\nexport const deviceSchema = z.object({\n    id: z.number(),\n    name: z.string(),\n    switchingConfig: deviceSwitchingConfigSchema,\n    modbusConfig: z.object({\n        ip: z.string(),\n        port: z.number(),\n        modbusId: z.number(),\n    }),\n\n    datapoints: z.object({\n        power: datapointConfigSchema,\n        status: datapointConfigSchema,\n        custom: z.array(datapointConfigSchema)\n    }),\n\n    methods: z.object({\n        switchOn: methodConfigSchema,\n        switchOff: methodConfigSchema\n    })\n\n})\n\nexport const plantSchema = z.object({\n    id: z.number(),\n    name: z.string(),\n    location: z.string(),\n    inverterIds: z.array(z.number())\n})\n\n\nexport type DeviceData = z.infer<typeof deviceSchema>\nexport type PlantData = z.infer<typeof plantSchema>\nexport type DatapointConfigData = z.infer<typeof datapointConfigSchema>\nexport type MethodConfigData = z.infer<typeof methodConfigSchema>\n"]}